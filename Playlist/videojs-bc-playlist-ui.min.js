/**
 * @brightcove/videojs-bc-playlist-ui
 * @version 1.0.1
 * @copyright 2016 Brightcove, Inc.
 * @license UNLICENSED
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsBcPlaylistUi=e()}}(function(){return function e(t,n,i){function l(s,a){if(!n[s]){if(!t[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return l(n?n:e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)l(i[s]);return l}({1:[function(e,t,n){},{}],2:[function(e,t,n){(function(n){var i="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},l=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=i["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=i["__GLOBAL_DOCUMENT_CACHE@4"]=l),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],3:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(t){!function t(n,i,l){function o(a,r){if(!i[a]){if(!n[a]){var u="function"==typeof e&&e;if(!r&&u)return u(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return o(t?t:e)},c,c.exports,t,n,i,l)}return i[a].exports}for(var s="function"==typeof e&&e,a=0;a<l.length;a++)o(l[a]);return o}({1:[function(){(function(e){"use strict";var t=function(e){return e&&e.__esModule?e.default:e},n=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function e(t,n,i){var l=Object.getOwnPropertyDescriptor(t,n);if(void 0===l){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in l&&l.writable)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)},l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=t("undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null),a=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},r=function(){var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),u={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:r},d=function(e){e.addClass("vjs-selected")},c=function(e){e.removeClass("vjs-selected"),e.thumbnail&&s.removeClass(e.thumbnail,"vjs-playlist-now-playing")},f=function(e){if(!e){var t=document.createElement("div");return t.className="vjs-playlist-thumbnail",t}var n=document.createElement("picture");if(n.className="vjs-playlist-thumbnail","string"==typeof e){var i=document.createElement("img");i.src=e,n.appendChild(i)}else{for(var l=0;l<e.length-1;l++){var o=e[l],s=document.createElement("source");for(var a in o)s[a]=o[a];n.appendChild(s)}var r=e[e.length-1],i=document.createElement("img");for(var a in r)i[a]=r[a];n.appendChild(i)}return n},p=s.getComponent("Component"),y=function(e){function t(e,n,l){if(o(this,t),!n.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.item=n.item,this.playOnSelect=l.playOnSelect,this.emitTapEvents(),this.on(["click","tap"],this.switchPlaylistItem_),this.on("keydown",this.handleKeyDown_),this.on(["focus","mouseover"],this.addPlayIcon_),this.on(["blur","mouseout"],this.removePlayIcon_)}return l(t,e),n(t,{handleKeyDown_:{value:function(e){(13===e.which||32===e.which)&&this.switchPlaylistItem_()}},switchPlaylistItem_:{value:function(){this.player_.playlist.currentItem(a(this.player_.playlist(),this.item)),this.playOnSelect&&this.player_.play()}},addPlayIcon_:{value:function(){s.addClass(this.thumbnail,"vjs-icon-play"),s.removeClass(this.thumbnail,"vjs-playlist-now-playing")}},removePlayIcon_:{value:function(){document.activeElement!==this.el()&&(s.removeClass(this.thumbnail,"vjs-icon-play"),this.hasClass("vjs-selected")&&s.addClass(this.thumbnail,"vjs-playlist-now-playing"))}},createEl:{value:function(){var e=document.createElement("li"),t=this.options_.item;if(e.className="vjs-playlist-item",e.setAttribute("tabIndex",0),this.thumbnail=f(t.thumbnail),e.appendChild(this.thumbnail),t.duration){var n=document.createElement("time"),i=s.formatTime(t.duration);n.className="vjs-playlist-duration",n.setAttribute("datetime","PT0H0M"+t.duration+"S"),n.appendChild(document.createTextNode(i)),e.appendChild(n)}var l=document.createElement("cite"),o=t.name||this.localize("Untitled Video");if(l.className="vjs-playlist-name",l.appendChild(document.createTextNode(o)),l.setAttribute("title",o),e.appendChild(l),t.description){var a=document.createElement("p");a.className="vjs-playlist-description",a.appendChild(document.createTextNode(t.description)),a.setAttribute("title",t.description),e.appendChild(a)}return e}}}),t}(p),m=function(e){function t(e,n){var l=this;if(o(this,t),!e.playlist)throw new Error("videojs-playlist is required for the playlist component");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.items=[],n.supportsCssPointerEvents&&this.addClass("vjs-csspointerevents"),this.createPlaylist_(),s.browser.TOUCH_ENABLED||this.addClass("vjs-mouse"),e.on(["loadstart","playlistchange"],function(){l.update()}),e.on("adstart",function(){l.addClass("vjs-ad-playing")}),e.on("adend",function(){e.ended()?e.one("ended",function(){l.removeClass("vjs-ad-playing")}):l.removeClass("vjs-ad-playing")})}return l(t,e),n(t,{createEl:{value:function(){var e=this.options_;if(e.el)return e.el;var t=document.createElement("ol");return t.className=e.className,e.el=t,t}},createPlaylist_:{value:function(){for(var e=this.player_.playlist()||[],t=0;t<this.items.length;t++)this.removeChild(this.items[t]);this.items.length=0;var n=this.el_.querySelector(".vjs-playlist-ad-overlay");n&&n.parentNode.removeChild(n);for(var t=0;t<e.length;t++){var i=new y(this.player_,{item:e[t]},this.options_);this.items.push(i),this.addChild(i)}n=document.createElement("li"),n.className="vjs-playlist-ad-overlay",this.el_.appendChild(n);var l=this.player_.playlist.currentItem();if(this.items.length&&l>=0){d(this.items[l]);var o=this.items[l].$(".vjs-playlist-thumbnail");o&&s.addClass(o,"vjs-playlist-now-playing")}}},update:{value:function(){var e=this.player_.playlist();if(this.items.length!==e.length)return void this.createPlaylist_();for(var t=0;t<this.items.length;t++)if(this.items[t].item!==e[t])return void this.createPlaylist_();for(var n=this.player_.playlist.currentItem(),t=0;t<this.items.length;t++){var i=this.items[t];t===n?(d(i),document.activeElement!==i.el()&&s.addClass(i.thumbnail,"vjs-playlist-now-playing")):c(i)}}}}),t}(p),h=function(e){var t=this,n=void 0,i=void 0;if(!t.playlist)throw new Error("videojs-playlist is required for the playlist component");"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e&&1===e.nodeType?(i=e,n=s.mergeOptions(u)):(n=s.mergeOptions(u,e),i=document.querySelector("."+n.className)),n.el=i,t.playlistMenu=new m(t,n)};s.registerComponent("PlaylistMenu",m),s.registerComponent("PlaylistMenuItem",y),s.plugin("playlistUi",h)}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("global/window"),s=l(o),a=e("global/document"),r=l(a),u="undefined"!=typeof window?window.videojs:"undefined"!=typeof i?i.videojs:null,d=l(u);e("../node_modules/videojs-playlist-ui/dist/videojs-playlist-ui.min.js");var c={playOnSelect:!1},f=function(e,t){var n=null!==r.default.querySelector(".bc-iframe");if(void 0!==e.playlistMenu)return void d.default.log("Playlist UI is being initialized twice, which may cause issues.");if(e.addClass("vjs-playlist-enabled"),n){var i=r.default.createElement("ol");i.className="vjs-playlist",e.el().parentNode.appendChild(i),e.playlistUi({playOnSelect:t.playOnSelect})}else{var i=r.default.querySelector(".vjs-playlist");i?e.playlistUi({className:"vjs-playlist",playOnSelect:t.playOnSelect}):d.default.one(s.default,"load",function(){e.playlistUi({playOnSelect:t.playOnSelect})})}},p=function(e){var t=this;this.ready(function(){f(t,d.default.mergeOptions(c,e))})};d.default.plugin("bcPlaylistUi",p),p.VERSION="1.0.1",n.default=p,t.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../node_modules/videojs-playlist-ui/dist/videojs-playlist-ui.min.js":4,"global/document":2,"global/window":3}]},{},[5])(5)});
